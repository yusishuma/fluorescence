{"version":3,"sources":["../../../middlewares/log4j/logger.js"],"names":[],"mappings":";;;;;AAGA,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,aAAa,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;AACnD,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC3B,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;;AAEvB,IAAI,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;AACpD,IAAM,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;;;;AAIxC,IAAG,CAAC,EAAE,CAAC,UAAU,CAAC,WAAW,CAAC,EAAC;AAC3B,MAAE,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;AAC1B,UAAM,CAAC,IAAI,CAAC,cAAc,GAAG,WAAW,CAAC,CAAC;CAC7C;AACD,MAAM,CAAC,WAAW,CAAC,aAAa,CAAC,QAAQ,CAAC;AACtC,oBAAgB,EAAE,sBAAsB;;CAE3C,CAAC,EAAE,cAAc,CAAC,CAAC;;AAEpB,MAAM,CAAC,SAAS,CAAC;AACb,aAAS,EAAE,CACP,EAAE,IAAI,EAAE,SAAS,EAAE,EACnB;AACI,cAAM,EAAE,UAAU;AAClB,kBAAU,EAAE,mBAAmB;AAC/B,iBAAS,EAAE,aAAa;AACxB,kBAAU,EAAE,MAAM;KACrB,EACD;AACI,cAAM,EAAE,MAAM;AACd,kBAAU,EAAE,gBAAgB;AAC5B,oBAAY,EAAE,QAAQ;AACtB,oBAAY,EAAE,CAAC;KAClB,EACD;AACI,cAAM,EAAE,gBAAgB;AACxB,eAAO,EAAE,OAAO;AAChB,kBAAU,EAAE;AACR,kBAAM,EAAE,MAAM;AACd,sBAAU,EAAE,mBAAmB;SAClC;KACJ,CACJ;CACJ,CAAC,CAAC;;AAEH,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC","file":"logger.js","sourcesContent":["/**\n * Created by matonghe on 15/03/2017.\n */\nvar log4js = require('log4js');\nvar mongoAppender = require('log4js-node-mongodb');\nvar path = require('path');\nvar fs = require('fs');\n//日志根目录\nvar baseLogPath = path.resolve(__dirname, './logs');\nconst logger = log4js.getLogger('http');\n/**\n * 初始化日志目录\n */\nif(!fs.existsSync(baseLogPath)){\n    fs.mkdirSync(baseLogPath);\n    logger.info('createPath: ' + baseLogPath);\n}\nlog4js.addAppender(mongoAppender.appender({\n    connectionString: 'localhost:27017/test'\n\n}), 'fluorescence');\n\nlog4js.configure({\n    appenders: [\n        { type: 'console' },\n        {\n            'type': 'dateFile',\n            'filename': './logs/access.log',\n            'pattern': '-yyyy-MM-dd',\n            'category': 'http'\n        },\n        {\n            'type': 'file',\n            'filename': './logs/app.log',\n            'maxLogSize': 10485760,\n            'numBackups': 3\n        },\n        {\n            'type': 'logLevelFilter',\n            'level': 'ERROR',\n            'appender': {\n                'type': 'file',\n                'filename': './logs/errors.log'\n            }\n        }\n    ]\n});\n\nexports.logger = logger;\n"]}