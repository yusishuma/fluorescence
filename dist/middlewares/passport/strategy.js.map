{"version":3,"sources":["../../../middlewares/passport/strategy.js"],"names":[],"mappings":";;;;;AAGA,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACnC,IAAI,IAAI,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC;AACzC,IAAI,aAAa,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;AAC7C,QAAQ,CAAC,GAAG,CAAC,IAAI,aAAa,CAC1B,UAAS,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE;AAC5B,QAAI,CAAC,OAAO,CAAC,EAAE,eAAe,EAAE,KAAK,EAAE,EAAE,UAAU,GAAG,EAAE,IAAI,EAAE;AAC1D,YAAI,GAAG,EAAE;AAAE,mBAAO,IAAI,CAAC,GAAG,CAAC,CAAC;SAAE;AAC9B,YAAI,CAAC,IAAI,EAAE;AAAE,mBAAO,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SAAE;AACxC,YAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,EAAE;AAAE,mBAAO,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SAAE;AACxE,eAAO,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;KAC3B,CAAC,CAAC;CACN,CACJ,CAAC,CAAC","file":"strategy.js","sourcesContent":["/**\n * Created by matonghe on 15/03/2017.\n */\nvar passport = require(\"passport\");\nvar User = require(\"../../models/index\");\nvar BasicStrategy = require(\"passport-http\");\npassport.use(new BasicStrategy(\n    function(phone, password, done) {\n        User.findOne({ \"account.phone\": phone }, function (err, user) {\n            if (err) { return done(err); }\n            if (!user) { return done(null, false); }\n            if (!user.account.validPassword(password)) { return done(null, false); }\n            return done(null, user);\n        });\n    }\n));\n"]}