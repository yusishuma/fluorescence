{"version":3,"sources":["../../../middlewares/passport/auth.js"],"names":[],"mappings":";;;;;AAGA,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACnC,IAAI,IAAI,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC;AACzC,IAAI,aAAa,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;AAC7C,QAAQ,CAAC,GAAG,CAAC,IAAI,aAAa,CAC1B,UAAS,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE;AAC/B,QAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,EAAE,UAAU,GAAG,EAAE,IAAI,EAAE;AACrD,YAAI,GAAG,EAAE;AAAE,mBAAO,IAAI,CAAC,GAAG,CAAC,CAAC;SAAE;AAC9B,YAAI,CAAC,IAAI,EAAE;AAAE,mBAAO,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SAAE;AACxC,YAAI,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,EAAE;AAAE,mBAAO,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SAAE;AAChE,eAAO,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;KAC3B,CAAC,CAAC;CACN,CACJ,CAAC,CAAC","file":"auth.js","sourcesContent":["/**\n * Created by matonghe on 15/03/2017.\n */\nvar passport = require(\"passport\");\nvar User = require(\"../../models/index\");\nvar BasicStrategy = require(\"passport-http\");\npassport.use(new BasicStrategy(\n    function(username, password, done) {\n        User.findOne({ \"phone\": username }, function (err, user) {\n            if (err) { return done(err); }\n            if (!user) { return done(null, false); }\n            if (!user.validPassword(password)) { return done(null, false); }\n            return done(null, user);\n        });\n    }\n));\n"]}